<div class="matrix-container">
  <div #matrixHeader
       class="matrix-header main-header"
       [style.top.px]="-guidePositionTop">

    <div #streetAndTitleContainer
         class="street-and-title-container">
      <div #streetContainer
           class="street-container" (click)="scrollTop($event, streetContainer)">
        <div class="short-title">{{thing}} <span>{{ 'IN' | translate }}</span> {{activeCountries}} <span>{{ 'BY_DOLLAR' | translate }}</span></div>

        <div class="street-content">
          <street [places]="streetPlaces"
                  [hoverPlace]="hoverPlace"
                  [chosenPlaces]="chosenPlaces"
                  (filterStreet)="streetChanged($event)">
          </street>
        </div>
      </div>

      <div *ngIf="isPinMode && !isPinCollapsed"
           class="pin-container">
        <div *ngIf="placesSet && !placesSet.length"
             class="pin-info-text">Add images here by clicking the image below. A click on an image moves it up here.
        </div>

        <div class="places-container">
          <div *ngFor="let place of placesSet; let i = index"
               class="pin-place"
               [ngStyle]="{'background-image': place.isUploaded && toUrl(place?.background), height: pinItemSize + 'px'}"
               isImageLoaded [imageLoadedUrl]="place?.background"
               (imageLoadedEvent)="imageIsUploaded(i)"
               >
            <div *ngIf="isPinMode"
                 class="heart-container">
              <div class="heart-circle"
                    (click)="removePlaceFromSet($event, place)">
                  <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                        viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve">
                    <path style="fill:#D75A4A;" d="M24.85,10.126c2.018-4.783,6.628-8.125,11.99-8.125c7.223,0,12.425,6.179,13.079,13.543
                      c0,0,0.353,1.828-0.424,5.119c-1.058,4.482-3.545,8.464-6.898,11.503L24.85,48L7.402,32.165c-3.353-3.038-5.84-7.021-6.898-11.503
                      c-0.777-3.291-0.424-5.119-0.424-5.119C0.734,8.179,5.936,2,13.159,2C18.522,2,22.832,5.343,24.85,10.126z"/>
                </svg>
              </div>
            </div>
          </div>
        </div>

        <div class="pin-footer">
          <div class="pin-buttons-container">
            <span class="pin-done-share">Done, now I want to share it</span>
            <span class="pin-mode-close"
                  (click)="pinModeClose()">Cancel</span>
          </div>
        </div>
      </div>

      <div *ngIf="isPinMode && isPinCollapsed"
           class="pin-header">
        <p>3 families in Malavi & China & Coread are pinned to compare</p>
        <div class="buttons-container">
          <span (click)="pinModeExpand()">Expand</span>
          <span (click)="pinModeClose()">Close</span>
        </div>
      </div>
    </div>

    <income-filter *ngIf="!isDesktop && isOpenIncomeFilter"
                  [places]="streetPlacesData"
                  [lowIncome]="lowIncome"
                  [highIncome]="highIncome"
                  (sendResponse)="getResponseFromIncomeFilter($event)">
    </income-filter>
  </div>

  <matrix-images [row]="row"
                [zoom]="zoom"
                [query]="query"
                [thing]="thing"
                [places]="matrixPlaces"
                [activeHouse]="activeHouse"
                [clearActiveHomeViewBox]="clearActiveHomeViewBox"
                (filter)="urlChanged($event)"
                (hoverPlace)="hoverPlaces($event)"
                (activeHouseOptions)="activeHouseOptions($event)"
                (imageHeightChanged)="imageHeightChanged($event)">
  </matrix-images>

  <div class="zoom-column pull-right"
       *ngIf="isDesktop"
       [class.stop]="zoomPositionFixed">
    <button type="button"
            [disabled]="zoom === 2"
            (click)="changeZoom(zoom - 1)">
        <img class="sign" src="assets/img/plus.svg"/>
    </button>

    <button type="button"
            [disabled]="!isDesktop ? zoom === 3 : zoom === 10"
            (click)="changeZoom(1*zoom + 1*1)">
        <img class="sign" src="assets/img/minus.svg"/>
    </button>
  </div>
</div>
