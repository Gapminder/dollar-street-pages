sudo: required
dist: trusty
language: node_js
# test with node 6.*
node_js: "6"

# cache node_modules (read more: https://docs.travis-ci.com/user/caching/)
cache:
  apt: true
  npm: true
  directories:
    - node_modules

env:
  CXX=g++-4.8
#
#stages:
#  - &stage
#    name: lint
#  - <<: *stage
#    name: test
#  - <<: *stage
#    if: type = pull_request
## run protractor tests
#    name: E2E-tests

install:
# install contains update webdriver
- npm install

#jobs:
#  fast_finish: true
#  include:
##   lint code
#    - stage: lint
#      script: npm run lint
## run unit tests
#    - &test
#      stage: test
#      script: npm run test
#      # submit coverage report to codecov
#      after_success: npm run codecov
##   test e2e
#    - stage: e2e-tests
#      script: npm run e2e


jobs:
  include:
    - stage: unit tests
      script: npm run test
    - stage: E2E tests
      if: type = pull_request
      script: npm run e2e
