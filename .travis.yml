sudo: required
dist: trusty
language: node_js
# test with node 6.*
node_js: "6"

# https://docs.travis-ci.com/user/customizing-the-build#sts=Git Clone Depth
git:
  depth: 3
  submodules: false

# cache node_modules (read more: https://docs.travis-ci.com/user/caching/)
cache:
  directories:
    - node_modules

jobs:
  include:
    - stage: precache
    # install contains update webdriver
      script: true
      install: npm install
    - stage: lint
    # lint code
      script: npm run lint
      # submit coverage report to codecov
      after_success: npm run codecov
    - stage: unit tests
    # run unit tests
      script: npm run test
    - stage: E2E tests
    # run protractor tests only on pull requests
      if: type = pull_request
      script: npm run e2e
