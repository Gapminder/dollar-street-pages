sudo: required
dist: trusty
language: node_js
# test with node 6.*
node_js: "6"

# cache node_modules (read more: https://docs.travis-ci.com/user/caching/)
cache:
  apt: true
  npm: true
  directories:
    - node_modules

env:
  CXX=g++-4.8

stages:
  - &stage
    name: lint
  - <<: *stage
    if: type = push
    name: test
  - <<: *stage
    if: type = pull_request
    name: e2e-tests

install:
- npm install

jobs:
  fast_finish: true
  include:
#   test
    - &test
      stage: test
      script: npm run test
#   test e2e
    - stage: e2e-tests
      script:
      - npm run e2e


#script:
# run local karma tests
#- npm run lint
#- npm run pre-commit-test
# submit coverage report to codecov
#- npm run codecov

# run unit tests
#- npm run test

# run protractor tests
#- if [ "$TRAVIS_PULL_REQUEST" != "false" ]; then npm run e2e; fi

