<div id="mobile-search"
     [ngClass]="{'place-page': !matrixComponent}"
     [hidden]="!(activeThing && activeThing.iconDark)">
  <div class="thing-icon-container thing-icon pull-left"
       *ngIf="!placeComponent"
       [ngClass]="{exist: activeThing.shortDescription}">
    <img class="thing-icon icon"
         [hidden]="!(activeThing && activeThing.iconDark)"
         [src]="activeThing.iconDark"
         [alt]="activeThing.name">

    <div class="thing-pop-up">
      <span></span>
      <div class="thing-pop-up-content">
        <p>{{activeThing?.shortDescription}}<a [routerLink]="['Article', {id: activeThing._id}]">Read more >></a></p>
      </div>
    </div>
  </div>

  <div class="thing-icon pull-left"
       *ngIf="placeComponent && header && header.icon"
       [ngStyle]="{'background-image':toUrl(header.icon)}"></div>

  <div class="title-container line-clamp line-clamp-1 pull-left" *ngIf="matrixComponent">{{mobileTitle}}</div>

  <div class="title-container line-clamp line-clamp-1 pull-left" *ngIf="placeComponent && header">
    {{header.family[0] ? header.family[0]+', ':''}}{{header.income ? math.numberConvertation(header.income) + '$,
    ':''}}{{header.country}}
  </div>

  <div class="title-container line-clamp line-clamp-1 pull-left" *ngIf="mapComponent">{{activeThing.name}} <span>on the World map</span>
  </div>

  <img class="open-modal-icon"
       src="/assets/img/search-icon.svg"
       (click)="isOpen = !isOpen" alt="search-icon"/>
</div>

<div id="mobile-search-popup" [hidden]="!isOpen">
  <div class="search-input">
    <input class="form-control"
           type="search"
           placeholder="Enter keyword"
           [(ngModel)]="search.text">
    <img src="/assets/img/search-icon.svg" alt=""/>
    <div class="close-modal" (click)="isOpen = !isOpen">X</div>
  </div>

  <div class="tabs-container">
    <div class="tabs-header">
      <div class="tab-button" (click)="tab = 0" [ngClass]="{active: tab === 0}">Things</div>
      <div class="tab-button" (click)="tab = 1" [ngClass]="{active: tab === 1}" *ngIf="matrixComponent">
        Places
      </div>
    </div>

    <div class="tabs-body">
      <div [hidden]="tab === 1" class="tab-content">
        <div class="item"
             [hidden]="activeThing.name && activeThing.name.toLowerCase().indexOf(search.text.toLowerCase()) === -1">
          <h3 class="title">{{activeThing.category}}</h3>

          <div class="sub-item-content active">
            <div class="item-icon">
              <img *ngIf="activeThing.iconLight"
                   [src]="activeThing.iconLight" alt="activeThing.name">
            </div>

            <div class="item-name">{{activeThing.name}}</div>

            <div class="pointer" (click)="goToThing()">
            </div>
          </div>
        </div>

        <div class="item" *ngFor="let category of categories | SearchFilter:search.text:'name':true">
          <h3 class="title">{{category._id}}</h3>

          <div class="sub-item-content"
               *ngFor="let thing of category.things"
               [ngClass]="{'no-pass': thing.empty}"
               (click)="goToThing(thing)">
            <div class="item-icon">
              <img *ngIf="thing.icon"
                   [src]="thing.icon"
                   alt="thing.name">
            </div>

            <div class="item-name">{{thing.name}}</div>
          </div>
        </div>
      </div>

      <div [hidden]="tab === 0" *ngIf="matrixComponent" class="tab-content">
        <div class="item column">
          <h3 class="title">Region
            <div class="sub-item-content"
                 [ngClass]="{active: activeRegions[0] === 'World' && activeCountries[0] === 'World'}"
                 (click)="goToRegions('World')">
              <div class="item-icon">
                <img src="/assets/img/world.svg" alt="">
              </div>

              <div class="item-name world">World</div>
            </div>
          </h3>

          <div class="sub-item-content"
               *ngFor="let region of regions | SearchFilter:search.text:false"
               [ngClass]="{active: activeRegions.indexOf(region) !== -1}"
               (click)="goToRegions(region)">
            <div class="item-icon">
              <img *ngIf="region === 'Africa'" src="/assets/img/africa.svg" alt="">
              <img *ngIf="region === 'Europe'" src="/assets/img/europe.svg" alt="">
              <img *ngIf="region === 'Asia'" src="/assets/img/asia.svg" alt="">
              <img *ngIf="region === 'America'" src="/assets/img/america.svg" alt="">
            </div>

            <div class="item-name" [ngClass]="region.toLowerCase()">{{region}}</div>

            <div class="pointer"></div>
          </div>
        </div>

        <div class="item">
          <h3 class="title">Countries</h3>

          <div class="sub-item-content"
               *ngFor="let location of countries | SearchFilter:search.text:'country'"
               [ngClass]="{active: activeCountries.indexOf(location.country) !== -1, 'no-pass': location.empty}"
               (click)="goToCountries(location)">
            <div class="item-name">
              {{location.country}}
            </div>

            <div class="pointer"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
